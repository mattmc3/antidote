#!/usr/bin/env zsh

### Print where antidote is cloning bundles.
###
### usage: antidote home [-h|--help]

# Can be overridden by setting `$ANTIDOTE_HOME`.

emulate -L zsh
setopt local_options extended_glob

local opts
zparseopts -A opts -D -F -- h -help || return 1

if [[ -v opts[-h] ]] || [[ -v opts[--help] ]]; then
  antidote-help bundle
  return
fi

local rootdir
if [[ -n "$ANTIDOTE_HOME" ]]; then
  REPLY=$ANTIDOTE_HOME
elif [[ "${OSTYPE}" == darwin* ]]; then
  REPLY="$HOME/Library/Caches/antidote"
elif [[ "${OSTYPE}" == (cygwin|msys)* ]]; then
  REPLY="$LOCALAPPDATA/antidote"
elif [[ -n "$XDG_CACHE_HOME" ]]; then
  REPLY="$XDG_CACHE_HOME/antidote"
else
  REPLY="$HOME/.cache/antidote"
fi
[[ -d $REPLY ]] || mkdir -p $REPLY
echo $REPLY
