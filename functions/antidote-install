### Clone a new bundle and add it to your plugins file.
###
### usage: antidote install [-h|--help] <bundle> [<bundlefile>]

emulate -L zsh
setopt local_options extended_glob

local o_help
zparseopts -D -M -- h=o_help -help=h || return 1

if (( $#o_help )); then
  antidote-help install
  return
fi

local bundle=$1
local bundlefile=$2
if [[ -z "$bundlefile" ]]; then
  zstyle -s ':antidote:bundle' file 'bundlefile' ||
    bundlefile=${ZDOTDIR:-~}/.zsh_plugins.txt
fi

_antidote_clone $bundle
if [[ $? -ne 0 ]]; then
  echo >&2 "antidote: unable to clone bundle '$bundle'."
else
  echo $bundle >>| $bundlefile
  echo "Bundle '$bundle' added to '$bundlefile'."
fi

# vim: ft=zsh
